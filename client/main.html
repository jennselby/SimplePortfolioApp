<head>
    <title>Portfolios</title>
</head>

<body>
    {{> loginButtons }}
    {{> fileUpload }}
    {{> uploadedStatus}}
    {{> content}}
</body>

<template name="fileUpload">
    {{#if currentUser}}
        {{#if currentUser.canUpload }}
            <input class="userFile" type="file" name="userFile" multiple/>
            {{#if currentUser.isAdmin }}
                <label for="ownerUsername">File Owner</label>
                <select name="ownerUsername" id="ownerUsername">
                        <option value="" selected></option>
                    {{#each users}}
                        <option value="{{username}}">{{profile.name}}</option>
                    {{/each}}
                </select>
            {{/if}}
            <input class="submit" type="submit" value="Upload" name="submit">
        {{/if}}
    {{/if}}
</template>

<template name="uploadedStatus">
    {{#if currentUser}}
        {{message}}
        {{#each results}}
            {{fileMessage}} <a href="{{link}}">View {{filename}}</a>
        {{/each}}
    {{/if}}
</template>

<template name="content">
    {{#if currentUser}}
        {{> UI.dynamic template=contentTemplate }}
    {{/if}}
</template>


<template name="Teacher">
    {{#if currentUser}}
        <div class="nav" id="5thGradeLink">5th Grade</div>
        <div class="nav" id="8thGradeLink">8th Grade</div>
        <div class="nav" id="FileIndexLink">Full File Index</div>
        {{> UI.dynamic template=subContentTemplate }}
    {{/if}}
</template>

<template name="5thGrade">
    {{#if currentUser}}
        <p>This is the 5th grade template</p>
    {{/if}}
</template>

<template name="EigthGrade">
    {{#if currentUser}}
        <ul class="eighthFileList">
        {{#each students}}
            {{#if link}}
                <li class="studentItem"><a class="studentLink" href="{{link}}">{{userName}}</a></li>
            {{else}}
                <li class="studentItem">{{userName}}</li>
            {{/if}}
        {{/each}}
        </ul>
    {{/if}}
</template>

<template name="FileIndex">
    {{#if currentUser}}
        {{#each grades}}
            <div class="gradeName">{{gradeName}}</div>
            {{#each users}}
                <div class="userName">{{userName}}</div>
                {{#if htmlFiles.length}}
                    <ul class="fileList">
                    {{#each htmlFiles}}
                        <li class="fileName"><a class="fileLink" href="{{link}}">{{filename}}</a></li>
                    {{/each}}
                    </ul>
                {{/if}}
            {{/each}}
        {{/each}}
    {{/if}}
</template>
